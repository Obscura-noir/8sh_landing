# PRD: Раздел для агентов - платформа обмена валют

## 1. Обзор продукта

### 1.1 Описание
Раздел для агентов - это B2B2C платформа, которая позволяет авторизованным агентам создавать и управлять заявками на обмен валют для своих клиентов. Система объединяет функциональность REALPAY с брендингом и стилистикой 8sh.ru.

### 1.2 Цели
- Расширение сети партнеров через агентскую модель
- Увеличение объемов транзакций через B2B2C канал
- Предоставление агентам удобного инструмента для работы с клиентами
- Масштабирование бизнеса в регионах

## 2. Пользователи и роли

### 2.1 Типы пользователей
- **Агенты** - авторизованные партнеры с правом создания заявок
- **Клиенты агентов** - конечные пользователи
- **Администраторы** - внутренние сотрудники платформы
- **Супер-агенты** - агенты с расширенными правами и лимитами

### 2.2 Права доступа
- Создание и отслеживание заявок
- Доступ к курсам и лимитам
- Просмотр комиссий и доходности
- Управление клиентской базой

## 3. Основная функциональность

### 3.1 Создание заявки на обмен
**Интерфейс как в REALPAY:**
- Выбор валютной пары (например: HP → AED)
- Ввод суммы обмена с автоматическим расчетом
- Отображение курса и комиссий
- Выбор времени исполнения (5 мин / 30 мин / 60 мин)
- Кнопка "Отправить запрос"

### 3.2 Бронирование лотов
- Система лотов с номерами (например: ЛОТ #305)
- Отображение доступного объема
- Временные ограничения на бронирование
- Статус лота (активен/неактуален по запросу)

### 3.3 Дашборд агента
**Основные блоки:**
- Сводка по активным заявкам
- Доступные курсы и спреды
- Статистика по транзакциям
- Баланс комиссий

## 4. UI/UX требования

### 4.1 Дизайн-система
**На основе стиля 8sh.ru:**
- Минималистичный дизайн с белым фоном
- Синие акценты (#0066CC или близкие)
- Четкая типографика
- Карточный интерфейс
- Адаптивная верстка

### 4.2 Ключевые экраны

#### 4.2.1 Главная страница агента
```
┌─────────────────────────────────────────────┐
│ 8sh.ru Agent Dashboard                      │
│                                             │
│ ┌─────────────┐ ┌─────────────┐ ┌─────────┐ │
│ │ Активные    │ │ Доходность  │ │ Курсы   │ │
│ │ заявки: 12  │ │ за месяц    │ │ USD/EUR │ │
│ │             │ │ $2,450      │ │ 0.9234  │ │
│ └─────────────┘ └─────────────┘ └─────────┘ │
│                                             │
│ [+ Создать новую заявку]                    │
└─────────────────────────────────────────────┘
```

#### 4.2.2 Форма создания заявки
```
┌─────────────────────────────────────────────┐
│ Новая заявка на обмен                       │
│                                             │
│ Клиент: [Иван Петров ▼]                     │
│                                             │
│ HP → AED                                    │
│ ┌─────────────┐     ┌─────────────┐         │
│ │ 10 000 000  │ → │ 218 029 269 │         │
│ │ HP          │     │ AED         │         │
│ └─────────────┘     └─────────────┘         │
│                                             │
│ Курс: 80.0695                               │
│ Время: [⚫30 мин] [○60 мин]                  │
│                                             │
│ [Отправить запрос]                          │
└─────────────────────────────────────────────┘
```

### 4.3 Адаптивность
- Desktop-first подход
- Планшетная версия с оптимизированными формами
- Мобильная версия с упрощенным интерфейсом

## 5. Техническая архитектура

### 5.1 Frontend
- React.js / Next.js
- TypeScript
- Tailwind CSS (в стиле 8sh.ru)
- WebSocket для real-time обновлений курсов

### 5.2 Backend
- Node.js / Python Django
- PostgreSQL для основных данных
- Redis для кэширования курсов
- REST API + WebSocket

### 5.3 Интеграции
- API курсов валют
- Система уведомлений (email/SMS)
- KYC/AML провайдеры
- Платежные системы

## 6. Бизнес-логика

### 6.1 Модель комиссий
- Базовая комиссия агента: 0.1-0.5% от оборота
- Прогрессивная шкала в зависимости от объемов
- Бонусы за привлечение новых клиентов
- Реферальная программа

### 6.2 Лимиты и ограничения
- Дневные лимиты на агента
- Максимальная сумма одной транзакции
- География работы
- Валютные ограничения

### 6.3 Процесс обработки заявки
1. Агент создает заявку
2. Система проверяет лимиты и KYC клиента
3. Бронирование курса на указанное время
4. Подтверждение и исполнение
5. Зачисление комиссии агенту

## 7. Безопасность и соответствие

### 7.1 Аутентификация и авторизация
- Двухфакторная аутентификация для агентов
- Role-based access control (RBAC)
- Логирование всех действий

### 7.2 Соответствие требованиям
- KYC/AML проверки для всех клиентов
- Соответствие валютному законодательству
- Отчетность в надзорные органы

### 7.3 Мониторинг транзакций
- Автоматическое выявление подозрительных операций
- Лимиты по странам и суммам
- Блокировка сомнительных аккаунтов

## 8. Ключевые метрики

### 8.1 Бизнес-метрики
- Количество активных агентов
- Средний оборот на агента
- Количество транзакций в день
- Конверсия заявок в исполненные сделки

### 8.2 Технические метрики
- Время отклика API (<200ms)
- Время обновления курсов (<5 секунд)
- Availability 99.9%
- Время загрузки страниц (<2 секунд)

## 9. MVP и этапы развития

### 9.1 MVP (Минимально жизнеспособный продукт)
- Регистрация и верификация агентов
- Создание заявок на основные валютные пары
- Система курсов и комиссий
- Базовый дашборд

### 9.2 Этап 2
- Мобильное приложение
- Расширенная аналитика
- API для интеграции с CRM агентов
- Продвинутые инструменты управления рисками

### 9.3 Этап 3
- Автоматическое хеджирование
- Интеграция с банковскими API
- Белый лейбл для крупных агентов
- Машинное обучение для ценообразования

## 10. Риски и митигация

### 10.1 Основные риски
- Валютные риски
- Операционные риски агентов
- Технические сбои
- Регуляторные изменения

### 10.2 Планы митигации
- Система лимитов и стоп-лоссов
- Обучение и сертификация агентов
- Резервное копирование и disaster recovery
- Мониторинг изменений в законодательстве

## 11. Примерный timeline разработки

- **Недели 1-2**: Техническое планирование и дизайн
- **Недели 3-8**: Разработка MVP
- **Недели 9-10**: Тестирование и исправление багов
- **Недели 11-12**: Пилотный запуск с ограниченным числом агентов
- **Недели 13-16**: Доработка на основе обратной связи
- **Неделя 17+**: Полный запуск

---

*Данный PRD является живым документом и будет обновляться по мере развития продукта и получения обратной связи от пользователей.*